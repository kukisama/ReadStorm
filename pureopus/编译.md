# pureopus 编译说明（arm64 真机）

本文记录 `pureopus/` 在 Windows 环境下的**最小可用编译流程**，目标是产出可安装到 **arm64 真机**的 Debug APK。

## 1. 前置条件

- 已安装 Android SDK（至少包含 Platform-Tools、Build-Tools、对应平台包）
- 已安装 **JDK 17**（工程目标为 Java/Kotlin 17）
- 终端可用 **bash**（用于执行仓库内脚本）



## 2. 编译命令（Debug，跳过测试）

在 `pureopus/` 目录执行：

- `bash ./gradlew :app:assembleDebug -x test`



清理后重新打包
- `cd c:\Scripts\ReadStorm\pureopus
./gradlew clean
./gradlew :app:assembleRelease -x test --info 2>&1 | Select-Object -Last 5
`

说明：

- `-x test`：跳过测试，仅做打包编译
- 当前项目目标是直接产出可安装到 arm64 真机的 Debug APK

> 备注：本仓库现在已提供 `gradlew.bat`，你也可以用 PowerShell 直接运行 `./gradlew.bat :app:assembleDebug -x test`。

## 3. 产物位置

- APK：`app/build/outputs/apk/debug/app-debug.apk`
- 元数据：`app/build/outputs/apk/debug/output-metadata.json`

## 4. arm64 说明

Debug APK 通常会包含 `arm64-v8a`（并可能同时包含其它 ABI）。

结论：可直接用于 **arm64 真机**安装与调试。

## 5. 常见问题

### 5.1 gradlew / wrapper 相关问题

- 如果你习惯用 bash：`bash ./gradlew ...`
- 如果你习惯用 PowerShell：`./gradlew.bat ...`

> 注意：Gradle Wrapper 的运行依赖 `gradle/wrapper/gradle-wrapper.jar`。
> 若你遇到“找不到 gradle-wrapper.jar”的报错，需要先把该 jar 补齐（通常通过 IDE/Gradle 生成或从已下载的 Gradle 分发包中提取）。

### 5.2 Kotlin 编译报错导致构建失败

优先修复源码编译错误后再重试打包。建议先执行一次：

- `bash ./gradlew :app:assembleDebug -x test`

观察首个报错文件与行号，按最小改动修复。

## 6. 工程关键信息（便于核对）

- 插件版本：Android Gradle Plugin `8.7.3`，Kotlin `2.1.0`
- `compileSdk`: 35
- `minSdk`: 21
- `targetSdk`: 35
- Java/Kotlin 目标：17
